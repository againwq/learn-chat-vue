{"ast":null,"code":"import chatkit from '../chatkit'; // Helper function for displaying error messages\n\nfunction handleError(commit, error) {\n  const message = error.message || error.info.error_description;\n  commit('setError', message);\n}\n\nexport default {\n  async login({\n    commit,\n    state\n  }, userId) {\n    try {\n      commit('setError', '');\n      commit('setLoading', true); // Connect user to ChatKit service\n      //const currentUser = await chatkit.connectUser(userId);\n\n      commit('setUser', {\n        username: currentUser.id,\n        name: currentUser.name\n      });\n      commit('setReconnect', false); // Test state.user\n\n      console.log(state.user);\n    } catch (error) {\n      handleError(commit, error);\n    } finally {\n      commit('setLoading', false);\n    }\n  }\n\n};","map":{"version":3,"names":["chatkit","handleError","commit","error","message","info","error_description","login","state","userId","username","currentUser","id","name","console","log","user"],"sources":["C:/Users/sun/Desktop/project/myproject/vue-chatkit/src/store/actions.js"],"sourcesContent":["import chatkit from '../chatkit';\r\n\r\n// Helper function for displaying error messages\r\nfunction handleError(commit, error) {\r\n  const message = error.message || error.info.error_description;\r\n  commit('setError', message);\r\n}\r\n\r\nexport default {\r\n  async login({ commit, state }, userId) {\r\n    try {\r\n      commit('setError', '');\r\n      commit('setLoading', true);\r\n      // Connect user to ChatKit service\r\n      //const currentUser = await chatkit.connectUser(userId);\r\n      commit('setUser', {\r\n        username: currentUser.id,\r\n        name: currentUser.name\r\n      });\r\n      commit('setReconnect', false);\r\n\r\n      // Test state.user\r\n      console.log(state.user);\r\n    } catch (error) {\r\n      handleError(commit, error)\r\n    } finally {\r\n      commit('setLoading', false);\r\n    }\r\n  }\r\n}"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,YAApB,C,CAEA;;AACA,SAASC,WAAT,CAAqBC,MAArB,EAA6BC,KAA7B,EAAoC;EAClC,MAAMC,OAAO,GAAGD,KAAK,CAACC,OAAN,IAAiBD,KAAK,CAACE,IAAN,CAAWC,iBAA5C;EACAJ,MAAM,CAAC,UAAD,EAAaE,OAAb,CAAN;AACD;;AAED,eAAe;EACb,MAAMG,KAAN,CAAY;IAAEL,MAAF;IAAUM;EAAV,CAAZ,EAA+BC,MAA/B,EAAuC;IACrC,IAAI;MACFP,MAAM,CAAC,UAAD,EAAa,EAAb,CAAN;MACAA,MAAM,CAAC,YAAD,EAAe,IAAf,CAAN,CAFE,CAGF;MACA;;MACAA,MAAM,CAAC,SAAD,EAAY;QAChBQ,QAAQ,EAAEC,WAAW,CAACC,EADN;QAEhBC,IAAI,EAAEF,WAAW,CAACE;MAFF,CAAZ,CAAN;MAIAX,MAAM,CAAC,cAAD,EAAiB,KAAjB,CAAN,CATE,CAWF;;MACAY,OAAO,CAACC,GAAR,CAAYP,KAAK,CAACQ,IAAlB;IACD,CAbD,CAaE,OAAOb,KAAP,EAAc;MACdF,WAAW,CAACC,MAAD,EAASC,KAAT,CAAX;IACD,CAfD,SAeU;MACRD,MAAM,CAAC,YAAD,EAAe,KAAf,CAAN;IACD;EACF;;AApBY,CAAf"},"metadata":{},"sourceType":"module"}